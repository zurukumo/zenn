---
title: "ãƒãƒƒãƒˆä¸Šã®å‘è´æ•°è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®çŸ¥è¦‹ã«å‹æ‰‹ã«è£œè¶³ã™ã‚‹"
emoji: "ğŸˆ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['mahjong', 'shanten', 'éº»é›€', 'å‘è´æ•°', 'ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ']
published: true
published_at: "2024-08-15 07:30"
---

## æ¦‚è¦
ãƒãƒƒãƒˆä¸Šã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹éº»é›€ã®å‘è´æ•°è¨ˆç®—ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®çŸ¥è¦‹ã¯åˆå¿ƒè€…ã«ã¯é›£è§£ãªéƒ¨åˆ†ãŒå¤šã„ã¨æ€ã‚ã‚Œã‚‹ã€‚ãã“ã§ã€ãƒãƒƒãƒˆä¸Šã«è»¢ãŒã£ã¦ã„ã‚‹å‘è´æ•°è¨ˆç®—ã®çŸ¥è¦‹ã«å¯¾ã—ã¦ã€è‡ªåˆ†ãŒåˆå¿ƒè€…ã®é ƒã«ç†è§£ã§ããªã‹ã£ãŸç‚¹ã‚’å‹æ‰‹ã«è£œè¶³ã™ã‚‹ã€‚ãªãŠã€æœ¬è¨˜äº‹ã§ã¯ä¸ƒå¯¾å­ã¨å›½å£«ç„¡åŒã®å‘è´æ•°ã«ã¤ã„ã¦ã¯è§¦ã‚Œãªã„ã€‚

ã¤ã„ã§ã«è¨˜äº‹ã®æœ€å¾Œã§ãã‚Œãã‚Œã®æ‰‹æ³•ã®é•·çŸ­ã‚’ã¾ã¨ã‚ã‚‹ã€‚

## æ‰‹ç‰Œã®è¡¨ç¾
æœ¬è¨˜äº‹ã§ã¯æ‰‹ç‰Œã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¾ã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚ãŸã ã—ã€ç°¡å˜ã®ãŸã‚ã«ç­’å­ãƒ»ç´¢å­ãƒ»å­—ç‰Œã¯ç„¡è¦–ã€‚

$$ (3, 3, 3, 3, 0, 0, 0, 0, 2) $$

ã“ã‚Œã¯å·¦ã‹ã‚‰é †ã«`1m`ã®æšæ•°ã€`2m`ã®æšæ•°ã€â€¦ã€`9m`ã®æšæ•°ã‚’ç¤ºã—ã¦ã„ã‚‹ã€‚

ã“ã®ä¾‹ã®å ´åˆã¯`1m`~`4m`ãŒ3æšãšã¤ã€`9m`ãŒ2æšã‚ã‚‹ã“ã¨ã‚’è¡¨ã—ã¦ã„ã‚‹ã€‚

## 1. ã‚ã‚‰æ°ã®æ‰‹æ³•
https://mahjong.ara.black/etc/shanten/index.htm
å‘è´æ•°è¨ˆç®—ã‚’å®Ÿè£…ã—ã‚ˆã†ã¨æ€ã£ãŸã»ã¨ã‚“ã©ã®äººé–“ãŒé€šã£ãŸã“ã¨ãŒã‚ã‚‹ã§ã‚ã‚ã†ã‚ã‚‰æ°ã®ã‚µã‚¤ãƒˆã®æ‰‹æ³•ã‚’è£œè¶³ã™ã‚‹ã€‚

### 1.1. å‘è´æ•°è¨ˆç®—ã®æ•°å¼ã¯ã©ã“ã‹ã‚‰æ¥ã¦ã„ã‚‹ã®ã‹
ã‚ã‚‰æ°ã¯[å‘è´æ•°ã‚’æ±‚ã‚ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 3](https://mahjong.ara.black/etc/shanten/shanten3.htm)ã«ãŠã„ã¦ã€ä»¥ä¸‹ã®å‘è´æ•°è¨ˆç®—ã®æ•°å¼ã‚’å°å…¥ã—ãŸã€‚

$$
å‘è´æ•° = 8 - é¢å­ã®æ•° * 2 - é¢å­å€™è£œã®æ•°
$$

ãŸã ã—ã€

$$
\begin{aligned}
é¢å­ã®æ•° &= é †å­ã®æ•° + åˆ»å­ã®æ•° + å‰¯éœ²ã®æ•° \\\\
é¢å­å€™è£œã®æ•° &= å¡”å­ã®æ•° + å¯¾å­ã®æ•°
\end{aligned}
$$

ã¨ã™ã‚‹ã€‚

ãªãœã“ã®ã‚ˆã†ãªæ•°å¼ãŒå°å‡ºã§ãã‚‹ã®ã‹ã‚’èª¬æ˜ã™ã‚‹ã€‚

#### 1.1.1. 4é¢å­ã‚’ä½œã‚‹ã®ã«å¿…è¦ãªç‰Œã®æšæ•°
ã¾ãšã€é›€é ­ã‚’ç„¡è¦–ã—ã¦4é¢å­ã‚’ä½œã‚‹ã“ã¨ã ã‘ã‚’è€ƒãˆã‚‹ã€‚
é¢å­ã€é¢å­å€™è£œã€å­¤ç«‹ç‰Œã®ãã‚Œãã‚Œã«ã¤ã„ã¦ã€ãã‚Œã‚‰ã‚’é¢å­ã«æˆé•·ã•ã›ã‚‹ãŸã‚ã«å¿…è¦ãªç‰Œã®æ•°ã‚’è€ƒãˆã‚‹ã¨ã€ãã‚Œãã‚Œä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚
1. é¢å­ã‚’é¢å­ã«æˆé•·ã•ã›ã‚‹ãŸã‚ã«ã¯ã€0æšã®ç‰ŒãŒå¿…è¦
2. é¢å­å€™è£œã‚’é¢å­ã«æˆé•·ã•ã›ã‚‹ãŸã‚ã«ã¯ã€1æšã®ç‰ŒãŒå¿…è¦
3. å­¤ç«‹ç‰Œã‚’é¢å­ã«æˆé•·ã•ã›ã‚‹ãŸã‚ã«ã¯ã€2æšã®ç‰ŒãŒå¿…è¦

ä»Šã€æ‰‹ç‰Œã®ä¸­ã«é¢å­ãŒAå€‹ã€é¢å­å€™è£œãŒBå€‹ã‚ã‚‹ã¨ã™ã‚‹ã¨ã€4é¢å­ã‚’ä½œã‚‹ãŸã‚ã«ã¯ã€
1. Aå€‹ã®é¢å­ã‚’Aå€‹ã®é¢å­ã«æˆé•·ã•ã›ã‚‹
2. Bå€‹ã®é¢å­å€™è£œã‚’Bå€‹ã®é¢å­ã«æˆé•·ã•ã›ã‚‹
3. (4 - A - B)å€‹ã®å­¤ç«‹ç‰Œã‚’(4 - A - B)å€‹ã®é¢å­ã«æˆé•·ã•ã›ã‚‹

å¿…è¦ãŒã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚ã—ãŸãŒã£ã¦ã€4ã¤ã®é¢å­ã‚’ä½œã‚‹ãŸã‚ã«å¿…è¦ãªç‰Œã®æšæ•°ã¯ã€

$$
\begin{aligned}
4é¢å­ã«å¿…è¦ãªç‰Œã®æšæ•° &= A * 0 + B * 1 + (4 - A - B) * 2 \\\\
&= 8 - 2A - B \\\\
&= 8 - é¢å­ã®æ•° * 2 - é¢å­å€™è£œã®æ•°
\end{aligned}
$$

ã¨ãªã‚‹ã€‚

#### 1.1.2. 1é›€é ­ã‚’ä½œã‚‹ã®ã«å¿…è¦ãªç‰Œã®æšæ•°
ã¤ãã«ã€1é›€é ­ã‚’ä½œã‚‹ã“ã¨ã‚’è€ƒãˆã‚‹ã€‚
é›€é ­ã€å­¤ç«‹ç‰Œã®ãã‚Œãã‚Œã«ã¤ã„ã¦ã€ãã‚Œã‚‰ã‚’é›€é ­ã«æˆé•·ã•ã›ã‚‹ãŸã‚ã«å¿…è¦ãªç‰Œã®æ•°ã‚’è€ƒãˆã‚‹ã¨ã€ãã‚Œãã‚Œä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚
1. é›€é ­ã‚’é›€é ­ã«æˆé•·ã•ã›ã‚‹ãŸã‚ã«ã¯ã€0æšã®ç‰ŒãŒå¿…è¦
2. å­¤ç«‹ç‰Œã‚’é›€é ­ã«æˆé•·ã•ã›ã‚‹ãŸã‚ã«ã¯ã€1æšã®ç‰ŒãŒå¿…è¦

ä»Šã€æ‰‹ç‰Œã®ä¸­ã«é›€é ­ãŒCå€‹ã€å­¤ç«‹ç‰ŒãŒ(1 - C)å€‹ã‚ã‚‹ã¨ã™ã‚‹ã¨ã€1é›€é ­ã‚’ä½œã‚‹ãŸã‚ã«ã¯ã€
1. Cå€‹ã®é›€é ­ã‚’Cå€‹ã®é›€é ­ã«æˆé•·ã•ã›ã‚‹
2. (1 - C)å€‹ã®å­¤ç«‹ç‰Œã‚’(1 - C)å€‹ã®é›€é ­ã«æˆé•·ã•ã›ã‚‹

å¿…è¦ãŒã‚ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚ã—ãŸãŒã£ã¦ã€1ã¤ã®é›€é ­ã‚’ä½œã‚‹ãŸã‚ã«å¿…è¦ãªç‰Œã®æšæ•°ã¯ã€

$$
\begin{aligned}
1é›€é ­ã«å¿…è¦ãªç‰Œã®æšæ•° &= C * 0 + (1 - C) * 1 \\\\
&= 1 - C \\\\
&= 1 - é›€é ­ã®æ•°
\end{aligned}
$$
ã¨ãªã‚‹ã€‚

#### 1.1.3. å‘è´æ•°ã®å°å‡º
4é¢å­ã‚’ä½œã‚‹ãŸã‚ã«å¿…è¦ãªç‰Œã®æšæ•°ã¨1é›€é ­ã‚’ä½œã‚‹ãŸã‚ã«å¿…è¦ãªç‰Œã®æšæ•°ã‚’è¶³ã—åˆã‚ã›ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚

$$
\begin{aligned}
4é¢å­1é›€é ­ã«å¿…è¦ãªç‰Œã®æšæ•° &= 8 - é¢å­ã®æ•° * 2 - é¢å­å€™è£œã®æ•° + 1 - é›€é ­ã®æ•° \\\\
&= 9 - é¢å­ã®æ•° * 2 - é¢å­å€™è£œã®æ•° - é›€é ­ã®æ•°
\end{aligned}
$$

å‘è´æ•°ã¨ã¯å¿…è¦ãªç‰Œã®æšæ•° - 1ã®ã“ã¨ãªã®ã§ã€

$$
\begin{aligned}
å‘è´æ•° &= 4é¢å­1é›€é ­ã«å¿…è¦ãªç‰Œã®æšæ•° -1 \\\\
&= 9 - é¢å­ã®æ•° * 2 - é¢å­å€™è£œã®æ•° - é›€é ­ã®æ•° - 1 \\\\
&= 8 - é¢å­ã®æ•° * 2 - é¢å­å€™è£œã®æ•° - é›€é ­ã®æ•°
\end{aligned}
$$

ã¨ãªã‚Šã€ã“ã‚Œã¯å†’é ­ã®ã‚ã‚‰æ°ã®æ•°å¼ã«å¯¾ã—ã¦é›€é ­ã«é–¢ã™ã‚‹è£œæ­£ã‚’åŠ ãˆãŸã‚‚ã®ã¨ä¸€è‡´ã™ã‚‹ã€‚
ãªãŠã€é›€é ­ãŒã‚ã‚‹å ´åˆã«1ã‚’å¼•ãã“ã¨ã¯[å‘è´æ•°ã‚’æ±‚ã‚ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 3](https://mahjong.ara.black/etc/shanten/shanten3.htm)ã§ã‚‚èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ã€‚

#### 1.1.4 åˆ¶ç´„æ¡ä»¶
4é¢å­ã‚’ä½œã‚‹æ™‚ã«å­¤ç«‹ç‰ŒãŒ(4 - A - B)æšã€é›€é ­ã‚’ä½œã‚‹ã¨ãã«å­¤ç«‹ç‰ŒãŒ(1 - C)æšã‚ã‚‹ã¨ç½®ã„ãŸãŒã€ã“ã‚ŒãŒè² ã®å€¤ã«ã¯ãªã£ã¦ã¯ã„ã‘ãªã„ã€‚ã‚ˆã£ã¦ä»¥ä¸‹ã®åˆ¶ç´„æ¡ä»¶ã‚’è¨­ã‘ã‚‹ã€‚

$$
4 - A - B \geq 0, \quad 1 - C \geq 0
$$

ã™ãªã‚ã¡

$$
é¢å­ã®æ•° + é¢å­å€™è£œã®æ•° \leq 4, \quad é›€é ­ã®æ•° \leq 1
$$

ã§ã‚ã‚‹ã€‚

ã—ãŸãŒã£ã¦å‘è´æ•°ã®æ•°å¼ã«å„æ•°å€¤ã‚’ä»£å…¥ã™ã‚‹å‰ã«ã€

$$
\begin{aligned}
é¢å­å€™è£œã®æ•° &= min(é¢å­å€™è£œã®æ•°, 4 - é¢å­ã®æ•°) \\\\
é›€é ­ã®æ•° &= min(é›€é ­ã®æ•°, 1)
\end{aligned}
$$

ã¨ã„ã£ãŸèª¿æ•´ã‚’è¡Œãˆã°è‰¯ã„ã€‚ã¡ãªã¿ã«ã€é¢å­ã®æ•°ã§ã¯ãªãé¢å­å€™è£œã®æ•°ã‚’èª¿ç¯€ã—ã¦ã„ã‚‹ã®ã¯ã€é¢å­ã®æ–¹ãŒé¢å­å€™è£œã«æ¯”ã¹ã¦å‘è´æ•°ã‚’æ¸›ã‚‰ã™åŠ¹æœãŒå¤§ããã€é™ç•Œã¾ã§ä½¿ã„ãã‚ŠãŸã„ã‹ã‚‰ã§ã‚ã‚‹ã€‚


### 1.2 ã©ã®ã‚ˆã†ã«é¢å­ã®æ•°ã€é¢å­å€™è£œã®æ•°ã€é›€é ­ã®æ•°ã®çµ„ã¿åˆã‚ã›ã‚’æ±‚ã‚ã‚‹ã®ã‹
å‘è´æ•°ã®è¨ˆç®—ã®å¼ã¯å°å‡ºã§ããŸã®ã§ã€ã‚ã¨ã¯æ‰‹ç‰Œã‹ã‚‰é¢å­ã®æ•°ã€é¢å­å€™è£œã®æ•°ã€é›€é ­ã®æ•°ã®çµ„ã¿åˆã‚ã›ã¨ã—ã¦ã‚ã‚Šãˆã‚‹ã‚‚ã®ã‚’å…¨ã¦åˆ—æŒ™ã—ã€ãã‚Œãã‚Œã‚’ä¸Šã®å‘è´æ•°ã‚’æ±‚ã‚ã‚‹å¼ã«ä»£å…¥ã—ã€ãã®ä¸­ã§æœ€å°ã¨ãªã‚‹å‘è´æ•°ã‚’æ±‚ã‚ã‚Œã°è‰¯ã„ã€‚

ãŸã¨ãˆã°`1223m`ã¯`123m`ã®é¢å­1ã¤ã¨æ‰ãˆã‚‹ã“ã¨ã‚‚ã€`12m`ã¨`23m`ã®é¢å­å€™è£œ2ã¤ã¨æ‰ãˆã‚‹ã“ã¨ã‚‚ã€`13m`ã®é¢å­å€™è£œ1ã¤ã¨`22m`ã®é›€é ­1ã¤ã¨æ‰ãˆã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚é¢å­ã®æ•°ã€é¢å­å€™è£œã®æ•°ã€é›€é ­ã®æ•°ã®çµ„ã¿åˆã‚ã›ã¯ä¸€ã¤ã«å®šã¾ã‚‰ãªã„ã€‚

å…¨ã¦ã®çµ„ã¿åˆã‚ã›ã‚’åˆ—æŒ™ã™ã‚‹æ–¹æ³•ã¯ã‚ã‚‰æ°ã®ã‚µã‚¤ãƒˆã«ã¯è©³ã—ãæ›¸ã‹ã‚Œã¦ã„ãªã„ãŒã€ä¸€èˆ¬çš„ã«ã¯å†å¸°é–¢æ•°ã‚’ä½¿ã†ã“ã¨ã§ç°¡å˜ã«æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°åˆå¿ƒè€…ã«ã¯ã‚„ã‚„é›£ã—ã„ã‹ã‚‚ã—ã‚Œãªã„ã®ã§ã€å†å¸°é–¢æ•°ã®å…¸å‹çš„ãªç·´ç¿’å•é¡Œã§ã‚ã‚‹ãƒãƒã‚¤ã®å¡”ãªã©ã‚’è§£ã„ã¦ã‹ã‚‰å–ã‚Šçµ„ã‚€ã¨è‰¯ã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚

https://qiita.com/ka201504/items/e46d6c9bde13e61b3331

ã‚ã‚‰æ°ã¨ã»ã¼åŒã˜æ‰‹æ³•ã®å®Ÿè£…ã‚’ã—ã¦ã„ã‚‹å°æ—æ°ãŒ[GitHub](https://github.com/kobalab/majiang-core/blob/master/lib/xiangting.js)ã§å…¬é–‹ã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’å‚è€ƒã«ã™ã‚‹ã®ã‚‚è‰¯ã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚

ã¡ãªã¿ã«ã€å­—ç‰Œã¯é †å­ã¨å¡”å­ã‚’ä½œã‚‹ã“ã¨ãŒã§ããªã„ã¨ã„ã†æ€§è³ªä¸Šã€å†å¸°é–¢æ•°ã‚’ä½¿ã‚ãšã¨ã‚‚ç¬æ™‚ã«æœ€å–„ã®é¢å­ã®æ•°ã€é¢å­å€™è£œã®æ•°ã®æ•°ã®çµ„ã¿åˆã‚ã›ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

```python:zihai_pattern.py
# tehaiã¯[æ±ã®æšæ•°, å—ã®æšæ•°, ..., ç™¼ã®æšæ•°, ä¸­ã®æšæ•°]ã¨ã„ã†å½¢å¼ã®ãƒªã‚¹ãƒˆ
def zihai_pattern(tehai):
    mentsu = 0
    mentsu_kouho = 0
    for i in range(7):
        if tehai[i] >= 3: mentsu += 1
        if tehai[i] == 2: mentsu_kouho += 1
    return (mentsu, mentsu_kouho)
```

### 1.3. ãªãœé¢å­ã®æ•°ã¨é¢å­å€™è£œã®æ•°ã®çµ„ã¿åˆã‚ã›ã‚’äº‹å‰ã«è¨ˆç®—ã—ã¦ãŠãã®ã‹
ã‚ã‚‰æ°ã¯å‘è´æ•°ã®è¨ˆç®—ã‚’é«˜é€ŸåŒ–ã™ã‚‹ãŸã‚ã«ã€1ç¨®é¡ã®æ•°ç‰Œã‹ã‚‰æ§‹æˆã•ã‚Œã‚‹å…¨ã¦ã®æ‰‹ç‰Œã«ã¤ã„ã¦ã€é¢å­ã®æ•°ã€é¢å­å€™è£œã®æ•°ã®æ•°ã®çµ„ã¿åˆã‚ã›ã‚’äº‹å‰ã«è¨ˆç®—ã—ã¦è¨˜éŒ²ã—ã¦ãŠãæ–¹æ³•ã‚’ææ¡ˆã—ã¦ã„ã‚‹ã€‚

å‘è´æ•°ã‚’æ±‚ã‚ã‚‹ã¨ãã«ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã«ãªã‚‹ã®ã¯ã€é¢å­ã®æ•°ã¨é¢å­å€™è£œã®æ•°ã®çµ„ã¿åˆã‚ã›ã‚’å…¨åˆ—æŒ™ã™ã‚‹å‡¦ç†ã®éƒ¨åˆ†ãªã®ã§ã€äº‹å‰ã«ãã®çµ„ã¿åˆã‚ã›ã‚’æ±‚ã‚ã¦ãŠãã“ã¨ã§é«˜é€ŸåŒ–ã§ãã‚‹ã¨ã„ã†ã‚¢ã‚¤ãƒ‡ã‚¢ã§ã‚ã‚‹ã€‚

ãŸã¨ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦1ç¨®é¡ã®æ•°ç‰Œã§æ§‹æˆã•ã‚Œã‚‹æ‰‹ç‰Œã¨ãã®æ‰‹ç‰Œã‹ã‚‰æŠœãå‡ºã—ã†ã‚‹é¢å­ã®æ•°ã€é¢å­å€™è£œã®æ•°ã®æ•°ã®çµ„ã¿åˆã‚ã›ã‚’å†å¸°é–¢æ•°ç­‰ã‚’ä½¿ã£ã¦äº‹å‰ã«è¨ˆç®—ã—ã¦ãŠãã€‚ãŸã ã—ã€é¢å­ã®æ•°ã¨é¢å­å€™è£œã®æ•°ã¯(é¢å­ã®æ•°, é¢å­å€™è£œã®æ•°)ã¨ã„ã†å½¢å¼ã§è¡¨ç¾ã—ã¦ã„ã‚‹ã€‚

$$
\begin{aligned}
æ‰‹ç‰Œ(0, 0, 0, 0, 0, 0, 0, 0, 0) &\to (0, 0) \\
æ‰‹ç‰Œ(0, 0, 0, 0, 0, 0, 0, 0, 1) &\to (0, 0) \\
æ‰‹ç‰Œ(0, 0, 0, 0, 0, 0, 0, 0, 2) &\to (0, 1), (0, 0) \\
æ‰‹ç‰Œ(0, 0, 0, 0, 0, 0, 0, 0, 3) &\to (1, 0), (0, 1), (0, 0) \\
æ‰‹ç‰Œ(0, 0, 0, 0, 0, 0, 0, 0, 4) &\to (1, 0), (0, 2), (0, 1), (0, 0) \\
æ‰‹ç‰Œ(0, 0, 0, 0, 0, 0, 0, 1, 0) &\to (0, 0) \\
æ‰‹ç‰Œ(0, 0, 0, 0, 0, 0, 0, 1, 1) &\to (0, 1), (0, 0) \\
&ãƒ»\\
&ãƒ»\\
&ãƒ»\\
æ‰‹ç‰Œ(4, 4, 4, 1, 0, 1, 0, 0, 0) &\to (4, 1), (4, 0), ... \\
æ‰‹ç‰Œ(4, 4, 4, 1, 1, 0, 0, 0, 0) &\to (4, 1), (4, 0)... \\
æ‰‹ç‰Œ(4, 4, 4, 2, 0, 0, 0, 0, 0) &\to (4, 1), (4, 0), ... \\
\end{aligned}
$$

ã“ã®ã‚ˆã†ãªãƒ†ãƒ¼ãƒ–ãƒ«ã‚’äº‹å‰ã«ä½œæˆã—ã¦ãŠã‘ã°ã€1.2.ã®`zihai_pattern`ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§
```python
# tehaiã¯[1mã®æšæ•°, 2mã®æšæ•°, ..., ç™¼ã®æšæ•°, ä¸­ã®æšæ•°]ã¨ã„ã†å½¢å¼ã®ãƒªã‚¹ãƒˆ
# tableã¯äº‹å‰è¨ˆç®—ã—ãŸã‚‚ã®
def all_tehai_pattern(tehai):
    for m_menstu, m_mentsu_kouho in table[tehai[0:9]]:
        for p_menstu, p_mentsu_kouho in table[tehai[9:18]]:
            for s_menstu, s_mentsu_kouho in table[tehai[18:27]]:
                z_menstu, z_mentsu_kouho = zihai_pattern(tehai[27:34])
                mentsu = m_menstu + p_menstu + s_menstu + z_menstu
                mentsu_kouho = m_mentsu_kouho + p_mentsu_kouho + s_mentsu_kouho + z_mentsu_kouho
                mentsu_kouho = min(mentsu_kouho, 4 - mentsu)
                yield (mentsu, mentsu_kouho)
```
ã®ã‚ˆã†ã«ã—ã¦ã€æ‰‹ç‰Œå…¨ä½“ã®é¢å­ã®æ•°ã¨é¢å­å€™è£œã®æ•°ã®çµ„ã¿åˆã‚ã›ã‚’ä¸€ç¬ã§æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚


å‘è´æ•°ã®æ•°å¼ã«ã¯é›€é ­ã®æ•°ã‚‚ä»£å…¥ã—ãªã„ã¨ã„ã‘ãªã„ã®ã§ã€é›€é ­ã®æŠœãå‡ºã—å‡¦ç†ã ã‘ã¯ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã®ã‚ˆã†ã«ã—ã¦ã€åˆ¥ã§å…¨æ¢ç´¢ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚‹ã€‚
```python:shanten.py
def calculate_shanten(tehai):
    min_shanten = float('inf')

    # é›€é ­ã‚’æŠœã‹ãªã„å ´åˆã®å‘è´æ•°
    for mentsu, mentsu_kouho in all_tehai_pattern(tehai):
        shanten = 8 - mentsu * 2 - mentsu_kouho
        min_shanten = min(min_shanten, shanten)

    # é›€é ­ã‚’æŠœãå ´åˆã®å‘è´æ•°
    # æŠœã‘ã‚‹é›€é ­ã‚’å…¨æ¢ç´¢
    for i in range(34):
        # é›€é ­ã‚’æŠœã‘ãªã‹ã£ãŸã‚‰ã‚¹ã‚­ãƒƒãƒ—
        if tehai[i] < 2:
            continue

        # é›€é ­ã‚’æŠœã
        tehai[i] -= 2
        for mentsu, mentsu_kouho in all_tehai_pattern(tehai):
                shanten = 8 - mentsu * 2 - mentsu_kouho - 1
                min_shanten = min(min_shanten, shanten)
        # é›€é ­ã‚’å¾©å…ƒã™ã‚‹
        tehai[i] += 2

    return min_shanten
```


### 1.4. ãªãœäº‹å‰ã«æ±‚ã‚ã‚‹é¢å­ã®æ•°ã€é¢å­å€™è£œã®æ•°ã®çµ„ã¿åˆã‚ã›ã¯2ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã‚ˆã„ã®ã‹ï¼Ÿ
1.3.ã§ã¯

$$
æ‰‹ç‰Œ(0, 0, 0, 0, 0, 0, 0, 0, 4) \to (1, 0), (0, 2), (0, 1), (0, 0)
$$

ã®ã‚ˆã†ã«é¢å­ã®æ•°ã€é¢å­å€™è£œã®æ•°ã®ã™ã¹ã¦ã®çµ„ã¿åˆã‚ã›ã‚’ãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¿å­˜ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã‹ã®ã‚ˆã†ã«æ›¸ã„ãŸãŒã€ä¾‹ãˆã°(0, 2)ã¯(0, 1)ã¨(0, 0)ã‚ˆã‚Šã‚‚æ˜ã‚‰ã‹ã«å‘è´æ•°ã‚’æ¸›ã‚‰ã™åŠ¹æœãŒå¤§ãã„ã¨åˆ†ã‹ã‚‹ã€‚

ã¨ã™ã‚‹ãªã‚‰ã°ã€è¨˜éŒ²ã—ã¦ãŠãã¹ãçµ„ã¿åˆã‚ã›ã®æ•°ã¯ã‚‚ã£ã¨æ¸›ã‚‰ã›ã‚‹ã®ã§ã¯ãªã„ã ã‚ã†ã‹ï¼Ÿ

çµè«–ã‹ã‚‰è¨€ãˆã°ã€[å‘è´æ•°ã‚’æ±‚ã‚ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 7](https://mahjong.ara.black/etc/shanten/shanten7.htm)ã§ã€

1. $é¢å­ * 2 ï¼‹ é¢å­å€™è£œ$ãŒæœ€å¤§ã¨ãªã‚‹é¢å­ãƒ»é¢å­å€™è£œ
2. $é¢å­ * 10 ï¼‹ é¢å­å€™è£œ$ãŒæœ€å¤§ã¨ãªã‚‹é¢å­ãƒ»é¢å­å€™è£œ

ã®2ãƒ‘ã‚¿ãƒ¼ãƒ³ã ã‘è¨˜éŒ²ã—ã¦ãŠã‘ã°è‰¯ã„ã¨è¿°ã¹ã‚‰ã‚Œã¦ã„ã‚‹ã€‚

ãƒ‘ã‚¿ãƒ¼ãƒ³1ã¯1.1.ã§æ±‚ã‚ãŸå‘è´æ•°ã®å¼ã‚’æœ€å°åŒ–ã™ã‚‹ã‚ˆã†ãªçµ„ã¿åˆã‚ã›ãªã®ã§ã€ä¸€è¦‹ã™ã‚‹ã¨ãƒ‘ã‚¿ãƒ¼ãƒ³1ã•ãˆæ±‚ã‚ã¦ãŠã‘ã°è‰¯ã„ã‚ˆã†ã«è¦‹ãˆã‚‹ãŒã€ãƒ‘ã‚¿ãƒ¼ãƒ³1ã ã‘ã§ã¯ä¸Šæ‰‹ãã„ã‹ãªã„å ´åˆãŒã‚ã‚‹ã“ã¨ãŒ[å‘è´æ•°ã‚’æ±‚ã‚ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 7](https://mahjong.ara.black/etc/shanten/shanten7.htm)ã§èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ã€‚

:::message
ãªãŠã€ã‚ã‚‰æ°ã®ã‚µã‚¤ãƒˆã§ã¯ãƒ‘ã‚¿ãƒ¼ãƒ³2ã‚’åŸºæº–ã¨ã—ã¤ã¤ã€ä¾‹å¤–ã¨ã—ã¦ãƒ‘ã‚¿ãƒ¼ãƒ³1ãŒå­˜åœ¨ã—ã¦ã„ã‚‹ã“ã¨ã‚’èª¬æ˜ã—ã¦ã„ã‚‹ãŒã€å€‹äººçš„ã«ã¯ãƒ‘ã‚¿ãƒ¼ãƒ³1ã‚’åŸºæº–ã¨ã—ã¤ã¤ã€ä¾‹å¤–ã¨ã—ã¦ãƒ‘ã‚¿ãƒ¼ãƒ³2ã‚’èª¬æ˜ã™ã‚‹æ–¹ãŒã‚ã‹ã‚Šã‚„ã™ã„ã¨æ€ã£ãŸã®ã§ã€æœ¬è¨˜äº‹ã§ã¯ãã®æ–¹é‡ã§èª¬æ˜ã™ã‚‹ã€‚
:::

ä¾‹ãˆã°`133345557m`ã‚’ãƒ‘ã‚¿ãƒ¼ãƒ³1ã‚’æœ€å¤§åŒ–ã™ã‚‹ã‚ˆã†ã«åˆ†è§£ã™ã‚‹ã¨ã€`345m`ã€`13m`ã€`35m`ã€`57m`ã¨ãªã‚‹ã€‚ã¨ã“ã‚ãŒã€ã‚‚ã—ç­’å­ã‚„ç´¢å­ã‚„å­—ç‰Œã«é¢å­å€™è£œãŒ1ã¤ã§ã‚‚å­˜åœ¨ã™ã‚Œã°ã€é¢å­ã®æ•° + é¢å­å€™è£œã®æ•°ãŒ5ã¤ä»¥ä¸Š(ã„ã‚ã‚†ã‚‹6ãƒ–ãƒ­ãƒƒã‚¯ã®å½¢)ã«ãªã£ã¦ã—ã¾ã„ã€`13m`ã€`35m`ã€`57m`ã®é¢å­å€™è£œã®ã©ã‚Œã‹ä¸€ã¤ã¯å‘è´æ•°ã‚’æ¸›ã‚‰ã™ã“ã¨ã«å¯„ä¸ã—ãªããªã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚

ã¤ã¾ã‚Šã€6ãƒ–ãƒ­ãƒƒã‚¯ä»¥ä¸Šã«ãªã‚‹å ´åˆã¯ãƒ‘ã‚¿ãƒ¼ãƒ³1ã®é¸ã³æ–¹ãŒæœ€å–„ã«ãªã‚‰ãªã„ã“ã¨ãŒã‚ã‚‹ãŸã‚ã€ãã®ã‚ˆã†ãªå ´åˆã«å‚™ãˆã¦ãƒ‘ã‚¿ãƒ¼ãƒ³2ã‚‚è¨˜éŒ²ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã§ã‚ã‚‹ã€‚

ã¨ã“ã‚ã§ãƒ‘ã‚¿ãƒ¼ãƒ³2ã®

$é¢å­ * 10 ï¼‹ é¢å­å€™è£œ$ãŒæœ€å¤§ã¨ãªã‚‹é¢å­ãƒ»é¢å­å€™è£œ

ã¨ã¯ä¸€ä½“ä½•ãªã‚“ã ã‚ã†ã‹ï¼Ÿ10ã¨ã„ã†æ•°å­—ã¯ã©ã“ã‹ã‚‰æ¥ãŸã®ã ã‚ã†ã‹ï¼Ÿ

çµè«–ã‹ã‚‰è¨€ãˆã°ã€ãƒ‘ã‚¿ãƒ¼ãƒ³2ã¯é¢å­ã‚’ãªã‚‹ã¹ãå¤šãæŠœãå‡ºãã†ã¨ã„ã†æ„å›³ã§ä½œã‚‰ã‚ŒãŸå¼ã§ã‚ã‚‹ã€‚ãƒ‘ã‚¿ãƒ¼ãƒ³1ã ã¨ç„¡é§„ã«é¢å­å€™è£œã‚’æŠœãå‡ºã—ãŸå ´åˆã«æœ€å–„ã«ãªã‚‰ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€ãƒ‘ã‚¿ãƒ¼ãƒ³2ã§ã¯é¢å­å€™è£œã‚ˆã‚Šã‚‚é¢å­ã‚’å„ªå…ˆã—ã¦æŠœãå‡ºã™ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã®ã ã€‚

é¢å­ãŒé¢å­å€™è£œã‚ˆã‚Šå„ªå…ˆã•ã‚Œã¦æŠœãå‡ºã•ã‚Œã•ãˆã™ã‚Œã°è‰¯ã„ã®ã§ã€å®Ÿã¯é¢å­ã®ä¿‚æ•°ã¯10ã§ãªãã¦ã‚‚ã‚ˆãã¦ã€1å„„ã§ã‚‚1å…†ã§ã‚‚è‰¯ã„ã—ã€å®Ÿã¯4ã§ã‚‚è‰¯ã„ã€‚

ã¡ãªã¿ã«ã€ã‚ã‚‰æ°ã®ã‚µã‚¤ãƒˆã§ã¯ã“ã®2ãƒ‘ã‚¿ãƒ¼ãƒ³ã ã‘ã‚’è¨˜éŒ²ã—ã¦ãŠã‘ã°ã‚ˆã„ã¨èª¬æ˜ã•ã‚Œã¦ã„ã‚‹ãŒã€æœ¬å½“ã«ã“ã®2ãƒ‘ã‚¿ãƒ¼ãƒ³ã ã‘è¨˜éŒ²ã™ã‚Œã°ååˆ†ãªã®ã ã‚ã†ã‹ï¼Ÿ2ãƒ‘ã‚¿ãƒ¼ãƒ³ã ã‘ã§ååˆ†ã ã¨è¨¼æ˜ã•ã‚Œã¦ã„ã‚‹ã®ã ã‚ã†ã‹ï¼Ÿ

ãŠãã‚‰ãã ãŒã€2ãƒ‘ã‚¿ãƒ¼ãƒ³ã ã‘ã‚’è¨˜éŒ²ã—ã¦ãŠã‘ã°ååˆ†ã¨ã„ã†ã“ã¨ã¯æ•°å­¦çš„ã«ã¯è¨¼æ˜ã•ã‚Œã¦ã„ãªã„ã¨æ€ã†ã€‚ä¸€å¿œã€Pythonã‚’ä½¿ã£ã¦ãƒã‚·ãƒ³ãƒ‘ãƒ¯ãƒ¼ã‚´ãƒªæŠ¼ã—ã§2ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ååˆ†ã ã¨ã„ã†ã“ã¨ã¯æ¤œè¨¼ã§ããŸãŒã€ã‚‚ã—æ•°å­¦ã«å¼·ã„æ–¹ãŒã„ã‚‹ãªã‚‰ã€ãœã²æ•°å­¦çš„ãªè¨¼æ˜ã«ã‚‚æŒ‘æˆ¦ã—ã¦ã»ã—ã„ã€‚

::::details ã‚ã¡ã‚ƒãã¡ã‚ƒæ±šã„æ¤œè¨¼ã‚³ãƒ¼ãƒ‰
```python:test.py
import itertools


# å¼1: mentsu * 2 + menstu_kouho * 1
# å¼2: mentsu * 10 + mentsu_kouho * 1
# ã‚ã‚‰æ°ã®æ‰‹æ³•ã§aãŒbã‚ˆã‚Šæ‚ªã„ã¨åˆ¤å®šã•ã‚Œã‚‹ã¨ãã«Trueã‚’è¿”ã™
def is_worse(a, b):
    return (a[0] * 2 + a[1] <= b[0] * 2 + b[1]) and (a[0] * 10 + a[1] <= b[0] * 10 + b[1])


def shanten(menstu, mentsu_kouho):
    mentsu_kouho = min(mentsu_kouho, 4 - menstu)
    return 8 - menstu * 2 - mentsu_kouho


# é¢å­ã®æ•°ã€é¢å­å€™è£œã®æ•°ã¨ã—ã¦ã‚ã‚Šãˆã‚‹ã‚‚ã®ã‚’å…¨æ¢ç´¢
patterns = []
for i in range(5):
    for j in range(5):
        if i * 3 + j * 2 <= 14:
            patterns.append((i, j))


# aãŒbã‚ˆã‚Šæ‚ªã„ã¨åˆ¤å®šã•ã‚Œã‚‹aã¨bã®ãƒšã‚¢ã‚’pattern_pairsã«æ ¼ç´
pattern_pairs = []
for a, b in itertools.product(patterns, repeat=2):
    if is_worse(a, b):
        pattern_pairs.append((a, b))


# aãŒbã‚ˆã‚Šæ‚ªã„ã¨åˆ¤å®šã•ã‚Œã‚‹ã‘ã©ã€å…¨ä½“ã§è¦‹ãŸã¨ãã«aã‚’æ¡ç”¨ã—ãŸã»ã†ãŒè‰¯ã„å ´åˆã‚’æ¢ã™
for (ma, mb), (pa, pb), (sa, sb) in itertools.product(pattern_pairs, repeat=3):
    a_mentsu = ma[0] + pa[0] + sa[0]
    a_menstu_kouho = ma[1] + pa[1] + sa[1]
    b_mentsu = mb[0] + pb[0] + sb[0]
    b_menstu_kouho = mb[1] + pb[1] + sb[1]

    if a_mentsu * 3 + a_menstu_kouho * 2 != b_mentsu * 3 + b_menstu_kouho * 2:
        continue

    if shanten(a_mentsu, a_menstu_kouho) < shanten(b_mentsu, b_menstu_kouho):
        print("ä¾‹å¤–ç™ºè¦‹!", ma, pa, sa, '|', mb, pb, sb)
```
::::


## 2. tomohxxæ°ã®æ‰‹æ³•
https://qiita.com/tomohxx/items/75b5f771285e1334c0a5
æ•°å­¦ã®è‹¦æ‰‹ãªè‡ªåˆ†ã«ã¯æ•°å¼ãŒå¤šãã¦ç†è§£ã™ã‚‹ã®ãŒå¤§å¤‰ã ã£ãŸãŒã€ä½•åº¦ã‚‚èª­ã‚€ã†ã¡ã«ã‚ˆã†ã‚„ãç†è§£ã™ã‚‹ã“ã¨ãŒã§ããŸã€‚

å®Ÿã¯å†…å®¹ã•ãˆç†è§£ã§ãã‚Œã°ã¨ã¦ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã§ã€ã‚ã‚‰æ°ã®æ‰‹æ³•ã‚ˆã‚Šã‚‚ç°¡å˜ã¨æ„Ÿã˜ã‚‹æ–¹ã‚‚å¤šã„ã®ã§ã¯ãªã„ã ã‚ã†ã‹ã€‚


### 2.1. ã¾ãšã¯æ¸…ä¸€è‰²éº»é›€ã§ç†è§£ã™ã‚‹
è©±ã‚’ç°¡å˜ã«ã™ã‚‹ãŸã‚ã«ã€ã¾ãšæ¸…ä¸€è‰²éº»é›€(è¬å­)ã®å‘è´æ•°ã‚’æ±‚ã‚ã‚‹äº‹ã‚’è€ƒãˆã‚‹ã€‚

ã¾ãšã¯distance(è·é›¢)ã¨ã„ã†æ¦‚å¿µã‚’å°å…¥ã™ã‚‹ã€‚distanceã¨ã¯ã€Œç¾åœ¨ã®æ‰‹ç‰Œã€ã‚’ã€Œç›®æ¨™ã¨ã™ã‚‹æ‰‹ç‰Œã€ã«å¤‰æ›ã™ã‚‹ãŸã‚ã«å¿…è¦ãªç‰Œã®æšæ•°ã®ã“ã¨ã§ã‚ã‚‹ã€‚

ä¾‹ãˆã°ã€ç¾åœ¨ã®æ‰‹ç‰ŒãŒ

$$ (2, 3, 3, 3, 0, 0, 1, 1, 1) $$

ã ã£ãŸã¨ã—ã¦ã€ã“ã‚Œã‚’

$$ (3, 3, 3, 3, 0, 0, 0, 0, 2) $$

ã¨ã„ã†4é¢å­1é›€é ­ã®å½¢ã«ã™ã‚‹ãŸã‚ã«ã¯ã€ä½•æšã®ç‰ŒãŒå¿…è¦ã ã‚ã†ã‹ï¼Ÿ

ç­”ãˆã¯`1m`ã¨`9m`ã‚’1æšãšã¤ã®åˆè¨ˆ2æšã§ã‚ã‚‹ã€‚

ã“ã‚Œã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã£ã½ãè¨ˆç®—ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚

```python:calculate_distance.py
current = [2, 3, 3, 3, 0, 0, 1, 1, 1]
target = [3, 3, 3, 3, 0, 0, 0, 0, 2]

distance = 0
for i in range(9):
    distance += max(target[i] - current[i], 0)
```

è¦ã™ã‚‹ã«ã€`target`ã«ã¯å­˜åœ¨ã—ã¦ã„ã¦`current`ã«ã¯å­˜åœ¨ã—ã¦ã„ãªã„ç‰Œã®æšæ•°ã®å’Œã‚’æ±‚ã‚ã¦ã„ã‚‹ã ã‘ã§ã‚ã‚‹ã€‚ã“ã‚ŒãŒtomohxxæ°ãŒå°å…¥ã—ãŸdistanceã®è¨ˆç®—æ–¹æ³•ã§ã‚ã‚‹ã€‚

:::message
ã¡ãªã¿ã«ã€tomohxxæ°ã®Qiitaã«ã¯

$$
{d({\bf h}, {\bf g}) = \frac{1}{2} \sum_{i=0}^{33} (|h_i - g_i|+h_i - g_i) \tag{4}}
$$

ã¨ã„ã†æ•°å¼ã§distanceãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŒ

$$
{\frac{1}{2} (|h_i - g_i|+h_i - g_i)}
$$

ã®éƒ¨åˆ†ã¯

$$
max(h_i - g_i, 0)
$$ã¨

ã¨ç­‰ä¾¡ãªãŸã‚ã€tomohxxæ°ã®distanceã®å®šç¾©ã¨ä¸Šè¨˜ã®Pythonã®ã‚³ãƒ¼ãƒ‰ã¯åŒã˜ã§ã‚ã‚‹ã€‚

æ•°å­¦ãŒå¾—æ„ã§ãªã„è‡ªåˆ†ã®ã‚ˆã†ãªäººé–“ã«ã¨ã£ã¦ã¯maxã‚’ä½¿ã†å¼ã®ã»ã†ãŒç›´æ„Ÿçš„ã«ç†è§£ã—ã‚„ã™ã‹ã£ãŸãŸã‚ã€æœ¬è¨˜äº‹ã§ã¯maxã‚’åˆ©ç”¨ã™ã‚‹ã€‚
:::

ä»¥ä¸Šã®ã“ã¨ã‹ã‚‰ã€æ¸…ä¸€è‰²éº»é›€ã«ãŠã„ã¦ã€Œç¾åœ¨ã®æ‰‹ç‰Œã€ã‚’ã€Œç›®æ¨™ã¨ã™ã‚‹æ‰‹ç‰Œã€ã«å¤‰æ›ã™ã‚‹ãŸã‚ã«å¿…è¦ãªç‰Œã®æšæ•°(= distance)ã¯ä¸€ç¬ã§è¨ˆç®—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨åˆ†ã‹ã£ãŸã€‚

æ¬¡ã«ã€Œç¾åœ¨ã®æ‰‹ç‰Œã€ã®å‘è´æ•°ã‚’æ±‚ã‚ã‚‹ã“ã¨ã‚’è€ƒãˆã‚‹ã€‚ã€Œç¾åœ¨ã®æ‰‹ç‰Œã€ã‚’ã€Œç›®æ¨™ã¨ã™ã‚‹æ‰‹ç‰Œã€ã«ã™ã‚‹ã¾ã§ã«ä½•æšã®ç‰ŒãŒå¿…è¦ã‹ã¯è¨ˆç®—ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§ã€å…¨ã¦ã®å’Œäº†å½¢ã‚’åˆ—æŒ™ã—ã¦ã€Œç›®æ¨™ã¨ã™ã‚‹æ‰‹ç‰Œã€ã«é€ä¸€ä»£å…¥ã—ã€ãã®ä¸­ã§ã€Œç¾åœ¨ã®æ‰‹ç‰Œã€ã¨ã®distanceãŒæœ€å°ã«ãªã‚‹ã‚‚ã®ã‚’é¸ã¹ã°è‰¯ã„ã€‚

ã‚³ãƒ¼ãƒ‰ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚

```python:calculate_shanten.py
def distance(current, target):
    d = 0
    for i in range(9):
        d += max(target[i] - current[i], 0)
    return d


def all_agari_pattern():
    (...ã™ã¹ã¦ã®å’Œäº†å½¢ã‚’åˆ—æŒ™ã™ã‚‹å‡¦ç†...)


# tehaiã¯[1mã®æšæ•°, 2mã®æšæ•°, ..., 9mã®æšæ•°]ã¨ã„ã†å½¢å¼ã®ãƒªã‚¹ãƒˆ
def calculate_shanten(tehai):
    min_distance = float('inf')
    for agari in all_agari_pattern():
        d = distance(tehai, agari)
        min_distance = min(min_distance, d)
    return min_distance - 1
```


å‘è´æ•°ã‚’æ±‚ã‚ã‚‹ãŸã‚ã«ã€æ¯å›å…¨ã¦ã®å’Œäº†å½¢ã‚’åˆ—æŒ™ã—ã¦distanceã‚’è¨ˆç®—ã™ã‚‹ã®ã¯å¤§å¤‰ãªã®ã§ã€ã‚ã‚‰æ°ã®æ‰‹æ³•ã¨åŒã˜ãäº‹å‰ã«å…¨ã¦ã®æ‰‹ç‰Œã«ã¤ã„ã¦æœ€å°distanceã®è¨ˆç®—ã‚’æ¸ˆã¾ã—ã¦ãŠããŸã„ã¨ã„ã†ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒç”Ÿã¾ã‚Œã‚‹ã€‚

æ¸…ä¸€è‰²éº»é›€ã«ãŠã„ã¦æ‰‹ç‰Œã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯118,800é€šã‚Šã€å’Œäº†å½¢ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯13,259é€šã‚Šã‚ã‚‹ã®ã§ã€118800 * 13259 = 1,575,169,200é€šã‚Šã®è¨ˆç®—ã‚’äº‹å‰ã«çµ‚ãˆã¦ãŠã‘ã°ã€ç¬æ™‚ã«å‘è´æ•°ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

Pythonã§ã¯$10^6$å›ã®è¨ˆç®—ã¯1ç§’ã‚‚ã‹ã‹ã‚‰ãšçµ‚ã‚ã‚‹ãŸã‚ã€1575169200 â‰’ $10^9$å›ã®è¨ˆç®—ã¯1,000ç§’ç¨‹åº¦ã‚ã‚Œã°çµ‚ã‚ã‚‹ã¨ã„ã†è¨ˆç®—ã«ãªã‚‹ã€‚é•·ã„ã¨ã¯ã„ãˆæ•°ååˆ†ç¨‹åº¦ãªã®ã§ã€ç¾å®Ÿçš„ãªè¨ˆç®—æ™‚é–“ã§ã‚ã‚‹ã€‚

äº‹å‰è¨ˆç®—ã‚’è¡Œã†ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚

```python:pre_calculate.py
def distance(current, target):
    (...ç•¥...)


def all_agari_pattern():
    (...ã™ã¹ã¦ã®å’Œäº†å½¢ã‚’åˆ—æŒ™ã™ã‚‹å‡¦ç†...)


def all_pattern():
    (...ã™ã¹ã¦ã®æ‰‹ç‰Œã‚’åˆ—æŒ™ã™ã‚‹å‡¦ç†...)


def pre_calculate():
    all_patterns = all_pattern()
    all_agari_patterns = all_agari_pattern()
    table = dict()

    for pattern in all_patterns:
        for agari_pattern in all_agari_patterns:
            d = distance(pattern, agari_pattern)
            if pattern not in table:
                table[pattern] = d
            else:
                table[pattern] = min(table[pattern], d)

    return table


table = pre_calculate()
# å¥½ããªå½¢å¼ã§tableã®å†…å®¹ã‚’å‡ºåŠ›ã™ã‚‹
```

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã¨ã“ã‚ã€è‡ªåˆ†ã®Macã§ã¯30åˆ†ã»ã©ã‹ã‹ã£ãŸã€‚

ä»¥ä¸Šã®ã“ã¨ã‹ã‚‰ã€æ¸…ä¸€è‰²éº»é›€ã«ãŠã„ã¦ã¯å…¨ã¦ã®æ‰‹ç‰Œã¨å…¨ã¦ã®å’Œäº†å½¢ã®çµ„ã¿åˆã‚ã›ã‚’åˆ—æŒ™ã—ã¦distanceã‚’äº‹å‰ã«è¨ˆç®—ã—ã¦ãŠãã“ã¨ã§ã€ä¸€ç¬ã§å‘è´æ•°ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨åˆ†ã‹ã£ãŸã€‚æ¬¡ã¯é€šå¸¸ã®éº»é›€ã¸ã¨æ‹¡å¼µã—ã¦ã„ãã€‚

### 2.2. é€šå¸¸ã®éº»é›€ã«æ‹¡å¼µã™ã‚‹
é€šå¸¸ã®éº»é›€ã«æ‹¡å¼µã™ã‚‹ã¨ã¯ã„ã£ã¦ã‚‚ã€å®Ÿã¯ã‚„ã‚‹ã“ã¨ã¯ãã“ã¾ã§å¤‰ã‚ã‚‰ãªã„ã€‚åŸºæœ¬çš„ã«ã¯æ‰‹ç‰Œã‚’å„ç¨®ã®ç‰Œã«åˆ†è§£ã—ã¦ã€æ¸…ä¸€è‰²éº»é›€ã§distanceã‚’æ±‚ã‚ãŸã¨ãã¨åŒã˜è¦é ˜ã§ãã‚Œãã‚Œã®distanceã‚’æ±‚ã‚ã¦ã„ãã ã‘ã§ã‚ã‚‹ã€‚

ä¾‹ãˆã°ã€ç¾åœ¨ã®æ‰‹ç‰ŒãŒ`1223m135p2468s111z`ã ã£ãŸã¨ã—ãŸã‚‰ã€ã“ã‚Œã‚’`1223m`ã€`135p`ã€`2468s`ã€`111z`ã«åˆ†è§£ã—ã€ãã‚Œãã‚Œã®distanceã‚’æ¸…ä¸€è‰²éº»é›€ã®ã¨ãã¨åŒã˜è¦é ˜ã§æ±‚ã‚ã‚‹ã®ã§ã‚ã‚‹ã€‚

ã“ã“ã§æ¸…ä¸€è‰²éº»é›€ã¨ç•°ãªã‚‹ã®ã¯ã€æ¸…ä¸€è‰²éº»é›€ã§ã¯å’Œäº†å½¢ã§è¬å­ã‚’14æšä½¿ã†ã“ã¨ãŒç¢ºå®šã—ã¦ã„ãŸã®ã«å¯¾ã—ã€é€šå¸¸ã®éº»é›€ã§ã¯æœ€çµ‚çš„ã«è¬å­ã‚’ä½•æšä½¿ã†ã‹ãŒç¢ºå®šã—ã¦ã„ãªã„ã¨ã„ã†ã“ã¨ã§ã‚ã‚‹ã€‚

ä¾‹ãˆã°æœ€çµ‚çš„ã«è¬å­ã‚’3æšä½¿ã†ã®ã§ã‚ã‚Œã°distanceã¯0ã«ãªã‚‹(ä¾‹ãˆã°`1223m`ã‚’`123m`ã«å¤‰æ›ã™ã‚‹å ´åˆ)ãŒã€æœ€çµ‚çš„ã«è¬å­ã‚’6æšä½¿ã†ã®ã§ã‚ã‚Œã°distanceã¯2ã«ãªã‚‹(ä¾‹ãˆã°`1223m`ã‚’`112233m`ã«å¤‰æ›ã™ã‚‹å ´åˆ)ã€‚ã“ã®ã‚ˆã†ã«é€šå¸¸ã®éº»é›€ã§ã¯æœ€çµ‚çš„ã«å„ç¨®ã®ç‰Œã‚’ä½•æšä½¿ã†ã‹ã«ã‚ˆã£ã¦distanceãŒå¤‰åŒ–ã™ã‚‹ã€‚

é€†ã«ã„ãˆã°ã€æœ€çµ‚çš„ã«ä½¿ã†å„ç¨®ã®ç‰Œã®æšæ•°ã•ãˆå›ºå®šã™ã‚Œã°distanceã¯ãŸã ä¸€ã¤ã«å®šã¾ã‚‹ã®ã§ã€å’Œäº†å½¢ã¨ã—ã¦ã‚ã‚Šãˆã‚‹è¬å­ã®æšæ•°ã€ç­’å­ã®æšæ•°ã€ç´¢å­ã®æšæ•°ã€å­—ç‰Œã®æšæ•°ã®çµ„ã¿åˆã‚ã›ã‚’å…¨ã¦åˆ—æŒ™ã—ã€ãã®ãã‚Œãã‚Œã«ã¤ã„ã¦distanceã‚’è¨ˆç®—ã—ã€ãã®ä¸­ã§æœ€å°ã®distanceã®ã‚‚ã®ã‚’é¸æŠã™ã‚‹ã“ã¨ã§å‘è´æ•°ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã‚ã‚‹ã€‚

```python:calculate_shanten.py
def calculate_shanten(tehai):
    suuhai_table = load_suuhai_table()
    zihai_table = load_zihai_table()

    min_distance = float('inf')
    nums = (0, 2, 3, 5, 6, 8, 9, 11, 12, 14)
    for m_num, p_num, s_num, z_num in itertools.product(nums, repeat=4):
        if m_num + p_num + s_num + z_num != sum(tehai):
            continue

        md = suuhai_table[(tehai[0:9], m_num)]
        pd = suuhai_table[(tehai[9:18], p_num)]
        sd = suuhai_table[(tehai[18:27], s_num)]
        zd = zihai_table[(tehai[27:34], z_num)]
        min_distance = min(min_distance, md + pd + sd + zd)

    return min_distance - 1
```

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦ä»¥ä¸‹ã®ç‚¹ã«æ³¨æ„ã™ã‚‹ã€‚

1. å’Œäº†å½¢ã«ãŠã„ã¦å„ç¨®ã®ç‰Œã®æ•°ãŒ3n + 1æšã«ãªã‚‹ã“ã¨ã¯ã‚ã‚Šãˆãªã„

å’Œäº†å½¢ã«ãŠã„ã¦ã€å„ç¨®ã®ç‰Œã®æšæ•°ã¯næšã®é¢å­ã§æ§‹æˆã•ã‚ŒãŸ3næšã‹ã€ã‚‚ã—ãã¯næšã®é¢å­ã¨1ã¤ã®é›€é ­ã§æ§‹æˆã•ã‚ŒãŸ3n + 2æšã—ã‹ã‚ã‚Šãˆãªã„ã€‚ã¤ã¾ã‚Šã€3n + 1æšã«ã¯ãªã‚‰ãªã„ã€‚3n + 1ã®å ´åˆã‚’å–ã‚Šé™¤ãã“ã¨ã§ã€å„ç¨®ã®ç‰Œã®æšæ•°ã®çµ„ã¿åˆã‚ã›ã®æ•°ã‚’é«˜ã€…150é€šã‚Šã¾ã§æ¸›ã‚‰ã™ã“ã¨ãŒã§ãã‚‹ã€‚ä»Šå›ã¯ã‚ã‚‰ã‹ã˜ã‚`nums`ã«3n + 1ã§è¡¨ã•ã‚Œã‚‹æ•°ã‚’å–ã‚Šé™¤ã„ãŸã‚‚ã®ã‚’å®šç¾©ã—ã¦ãŠã„ãŸã€‚

2. `table`ã®ã‚­ãƒ¼ãŒ`tehai`ã‹ã‚‰`(tehai, n)`ã®å½¢å¼ã«å¤‰ã‚ã£ãŸ

æœ€çµ‚çš„ã«ãã®ç¨®é¡ã®ç‰Œã‚’ä½•æšä½¿ã†ã‹ã«ã‚ˆã£ã¦distanceãŒç•°ãªã‚‹ãŸã‚ã€‚

3. æ•°ç‰Œã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¨å­—ç‰Œã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¯åˆ¥ã€…ã«å­˜åœ¨ã™ã‚‹

å„æ•°ç‰Œã¯9ç¨®é¡ã®ç‰ŒãŒã‚ã‚‹ãŒå­—ç‰Œã¯7ç¨®é¡ã—ã‹ãªã„ã€æ•°ç‰Œã¯é †å­ã‚’ä½œã‚Œã‚‹ãŒå­—ç‰Œã¯ä½œã‚Œãªã„ãªã©ã€æ•°ç‰Œã¨å­—ç‰Œã§ã¯åˆ—æŒ™ã§ãã‚‹å’Œäº†å½¢ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒç•°ãªã‚‹ãŸã‚ã€åˆ¥ã€…ã«äº‹å‰è¨ˆç®—ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚


æ¬¡ã¯distanceã‚’äº‹å‰è¨ˆç®—ã™ã‚‹`pre_calculate.py`ã®ã‚³ãƒ¼ãƒ‰ã‚’é€šå¸¸ã®éº»é›€ç”¨ã«æ‹¡å¼µã—ã¦ã„ãã€‚ã“ã¡ã‚‰ã‚‚æ¸…ä¸€è‰²éº»é›€ã®ã¨ãã¨ã‚„ã‚‹ã“ã¨ã¯ã»ã¼åŒã˜ã ãŒã€ä»¥ä¸‹ã®ç›¸é•ç‚¹ã«ã¯æ³¨æ„ã™ã‚‹ã€‚

1. `all_pattern`ã§ã¯14æšæœªæº€ã®æ‰‹ç‰Œã‚‚åˆ—æŒ™ã™ã‚‹ã€‚

é€šå¸¸ã®éº»é›€ã§ã¯`1223m135p2468s111z`ã®`1223m`ã®ã‚ˆã†ã«ã€æ‰‹ç‰Œã«å«ã¾ã‚Œã‚‹å„ç¨®ã®ç‰Œã®æšæ•°ãŒ14æšæœªæº€ã«ãªã‚‹ã“ã¨ãŒã‚ã‚‹ã‹ã‚‰ã€‚

2. `all_agari_pattern`ã§ã¯14æšæœªæº€ã®å’Œäº†å½¢ã‚‚åˆ—æŒ™ã™ã‚‹ã€‚

é€šå¸¸ã®éº»é›€ã§ã¯`112233m456s789m11z`ã®`112233m`ã®ã‚ˆã†ã«ã€å’Œäº†å½¢ã«å«ã¾ã‚Œã‚‹å„ç¨®ã®ç‰Œã®æšæ•°ãŒ14æšæœªæº€ã«ãªã‚‹ã“ã¨ãŒã‚ã‚‹ã‹ã‚‰ã€‚ã€Œnå€‹ã®é¢å­ã€ã‚‚ã—ãã¯ã€Œnå€‹ã®é¢å­ + 1ã¤ã®é›€é ­ã€ã®ã‚ˆã†ãªå½¢å¼ã§è¡¨ã•ã‚Œã‚‹ã‚‚ã®ã§ã‚ã‚Œã°ã€14æšæœªæº€ã§ã‚‚å’Œäº†å½¢ã¨ã—ã¦åˆ—æŒ™ã™ã‚‹ã€‚

3. `table`ã®ã‚­ãƒ¼ã‚’`(tehai, n)`ã®å½¢å¼ã«å¤‰æ›´ã™ã‚‹

ç†ç”±ã¯å…ˆç¨‹è¿°ã¹ãŸé€šã‚Šã§ã‚ã‚‹ã€‚

ä»¥ä¸Šã®ç›¸é•ç‚¹ã«æ³¨æ„ã—ãªãŒã‚‰ã€äº‹å‰è¨ˆç®—ã‚’è¡Œã†ã‚³ãƒ¼ãƒ‰ã‚’é€šå¸¸ã®éº»é›€ç”¨ã«æ‹¡å¼µã—ãŸã‚‚ã®ãŒä»¥ä¸‹ã§ã‚ã‚‹ã€‚

```python:pre_calculate.py
def distance(current, target):
    (...ç•¥...)

def all_suuhai_agari_pattern():
    (...æ•°ç‰Œã®å’Œäº†å½¢ã®ä¸€éƒ¨ã¨ã—ã¦ã‚ã‚Šãˆã‚‹ã‚‚ã®ã‚’åˆ—æŒ™ã™ã‚‹å‡¦ç†...)

def all_zihai_agari_pattern():
    (...å­—ç‰Œã®å’Œäº†å½¢ã®ä¸€éƒ¨ã¨ã—ã¦ã‚ã‚Šãˆã‚‹ã‚‚ã®ã‚’åˆ—æŒ™ã™ã‚‹å‡¦ç†...)

def all_suuhai_pattern():
    (...æ•°ç‰Œã®æ‰‹ç‰Œã®ä¸€éƒ¨ã¨ã—ã¦ã‚ã‚Šãˆã‚‹ã‚‚ã®ã‚’åˆ—æŒ™ã™ã‚‹å‡¦ç†...)

def all_zihai_pattern():
    (...å­—ç‰Œã®æ‰‹ç‰Œã®ä¸€éƒ¨ã¨ã—ã¦ã‚ã‚Šãˆã‚‹ã‚‚ã®ã‚’åˆ—æŒ™ã™ã‚‹å‡¦ç†...)

def pre_calculate()
    all_suuhai_patterns = all_suuhai_pattern()
    all_agari_suuhai_patterns = all_agari_suuhai_pattern()
    suuhai_table = dict()

    for suuhai_pattern in all_suuhai_patterns:
        for agari_suuhai_pattern in all_agari_suuhai_patterns:
            d = distance(suuhai_pattern, agari_suuhai_pattern)
            n = sum(agari_suuhai_pattern)
            key = (suuhai_pattern, n)
            if key not in table:
                suuhai_table[key] = d
            else:
                suuhai_table[key] = min(suuhai_table[key], d)

    (...å­—ç‰Œã«ã¤ã„ã¦ã‚‚åŒæ§˜...)

    return suuhai_table, zihai_table

suuhai_table, zihai_table = pre_calculate()
# å¥½ããªå½¢å¼ã§suuhai_tableã¨zihai_tableã®å†…å®¹ã‚’å‡ºåŠ›ã™ã‚‹
```

ã¡ãªã¿ã«æ¸…ä¸€è‰²éº»é›€ã§ã¯æ‰‹ç‰Œã¨ã—ã¦ã‚ã‚Šãˆã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯118,800é€šã‚Šã€å’Œäº†å½¢ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯13,259é€šã‚Šã ã£ãŸãŒã€ä»Šå›ã®æ‹¡é•·ã§14æšæœªæº€ã®æ‰‹ç‰Œã‚„å’Œäº†å½¢ã‚‚è¨±å®¹ã—ãŸã“ã¨ã«ã‚ˆã£ã¦ã€æ•°ç‰Œã®å ´åˆã€æ‰‹ç‰Œã¨ã—ã¦ã‚ã‚Šãˆã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯405,350é€šã‚Šã€å’Œäº†å½¢ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã¯21,743é€šã‚Šã«ã¾ã§å¢—ãˆã‚‹ã€‚

çµ„ã¿åˆã‚ã›ã§ã¯405350 * 21743 = 8,813,525,050é€šã‚Šã®è¨ˆç®—ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ã“ã‚Œã¯æ‹¡å¼µå‰ã®1,575,169,200é€šã‚Šã®6å€è¿‘ãã«ãªã‚‹ã€‚

å®Ÿéš›ã«è‡ªåˆ†ã®Macã§äº‹å‰è¨ˆç®—ã‚’è¡Œã£ãŸã¨ã“ã‚ã€4æ™‚é–“åŠã»ã©ã‹ã‹ã£ãŸ


## 3. ãã‚Œãã‚Œã®é•·çŸ­
### 3.1. ã‚ã‚‰æ°ã®æ‰‹æ³•
#### é•·æ‰€1. äº‹å‰è¨ˆç®—ã«ã‹ã‹ã‚‹æ™‚é–“ãŒçŸ­ã„

è‡ªåˆ†ã®å ´åˆã¯10åˆ†ã‚‚ã‹ã‹ã‚‰ãªã‹ã£ãŸã€‚

#### é•·æ‰€2. äº‹å‰è¨ˆç®—ã‚’ã—ãªãã¦ã‚‚ååˆ†é«˜é€Ÿ

å®Ÿéš›ã€ä¸Šè¿°ã—ãŸå°æ—æ°ã®ã‚³ãƒ¼ãƒ‰ã§ã¯äº‹å‰è¨ˆç®—ã‚’è¡Œã£ã¦ã„ãªã„ã€‚

#### çŸ­æ‰€1. ã‚³ãƒ¼ãƒ‰ãŒè¤‡é›‘ã«ãªã‚‹

å‘è´æ•°ã®æ•°å¼ã®ã‚ˆã†ãªãƒ‘ãƒƒã¨è¦‹ãŸã ã‘ã§ã¯ç†è§£ãŒé›£ã—ã„æ•°å¼ãŒå‡ºã¦ãã‚‹ã®ã§åˆå¿ƒè€…ã«ã¯é›£è§£ã«ãªã‚ŠãŒã¡ã€‚

é¢å­ã®æ•°ã¨é¢å­å€™è£œã®æ•°ã®çµ„ã¿åˆã‚ã›ãŒ2ãƒ‘ã‚¿ãƒ¼ãƒ³ã ã‘ã§ååˆ†ã¨ã„ã†ã®ã‚‚ã€ãŠãã‚‰ãæ•°å­¦çš„ã«ã¯è¨¼æ˜ã•ã‚Œã¦ã„ãªã„ã®ã§ã€åˆå¿ƒè€…ã«ã¯ãƒãƒ†ãƒŠãƒãƒ¼ã‚¯ãŒæ‹­ãˆãªã„ã€‚

é¢å­ã¨é¢å­å€™è£œã‚’æŠœãå‡ºã™å‡¦ç†ã®å‰ã«ã€é›€é ­ãŒã‚ã‚‹å ´åˆã¨é›€é ­ãŒãªã„å ´åˆã®æ¡ä»¶åˆ†å²ãŒå¿…è¦ã ã£ãŸã‚Šã€é¢å­ã¨é¢å­å€™è£œã®æ•°ã®åˆè¨ˆãŒ4ã‚’è¶…ãˆãŸã¨ãã¯é¢å­å€™è£œã®æ•°ã®èª¿æ•´ãŒå¿…è¦ã ã£ãŸã‚Šã¨ã€ä¾‹å¤–ã®å‡¦ç†ã‚‚å¤šã„ã€‚

#### çŸ­æ‰€2. 5æšç›®ã®ç‰Œã‚’å¾…ã¤è´ç‰Œã‚’è¨±å¯ã™ã‚‹

ä¾‹ãˆã°`11119999m111p111s`ã®ã‚ˆã†ãªæ‰‹ç‰Œã«å¯¾ã—ã¦ã‚ã‚‰æ°ã®æ‰‹æ³•ã‚’é©ç”¨ã™ã‚‹ã¨è´ç‰Œã ã¨åˆ¤å®šã•ã‚Œã‚‹ã€‚ãƒ«ãƒ¼ãƒ«ã«ã‚‚ã‚ˆã‚‹ãŒã€ä¸€èˆ¬çš„ã«ã¯ç´”æ‰‹ç‰Œã§4æšä½¿ã„åˆ‡ã£ã¦ã„ã‚‹ç‰Œã‚’å¾…ã¤è´ç‰Œã¯è¨±å¯ã—ãªã„ã“ã¨ãŒå¤šã„ã¨æ€ã†ã€‚

è´ç‰Œã¨åˆ¤å®šã•ã‚ŒãŸå ´åˆã«å¾…ã¡ã®æšæ•°ãŒæ®‹ã‚Šä½•æšã‚ã‚‹ã‹ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã¦0æšã®å ´åˆã¯å‘è´æ•°1ã‚’è¿”ã™ã¨ã„ã†å‡¦ç†ã‚’æŒŸã‚€ã“ã¨ã§è£œæ­£ã¯å¯èƒ½ã ãŒã€ã‚³ãƒ¼ãƒ‰ã¯ã•ã‚‰ã«è¤‡é›‘ã«ãªã‚‹ã ã‚ã†ã€‚

ã¡ãªã¿ã«å¤©é³³ã®ç‰Œç†ãƒ„ãƒ¼ãƒ«ã§ã¯1å‘è´ã¨åˆ¤å®šã•ã‚Œã‚‹ã€‚
![](https://storage.googleapis.com/zenn-user-upload/8b9b9fba88a2-20240815.png)

### 3.2. tomohxxæ°ã®æ‰‹æ³•
#### é•·æ‰€1. ã‚³ãƒ¼ãƒ‰ãŒã‚·ãƒ³ãƒ—ãƒ«ã«ãªã‚‹
distanceã‚’æ±‚ã‚ã‚‹å‡¦ç†ã¯ã€äººé–“ãŒå‘è´æ•°ã‚’æ•°ãˆã‚‹ã¨ãã¨ã»ã¼åŒã˜ãƒ­ã‚¸ãƒƒã‚¯(é ­ã«å®Ÿéš›ã®å’Œäº†å½¢ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã—ã¦ç‰ŒãŒä½•æšè¶³ã‚Šãªã„ã‹ã‚’æ•°ãˆã‚‹)ãªã®ã§ã€åˆå¿ƒè€…ã§ã‚‚åˆ†ã‹ã‚Šã‚„ã™ã„ã€‚ä¾‹å¤–å‡¦ç†ã‚‚å°‘ãªãã¦ã€ifæ–‡ãŒã»ã¨ã‚“ã©å‡ºã¦ã“ãªã„ã€‚

#### é•·æ‰€2. 5æšç›®ã®ç‰Œã‚’å¾…ã¤è´ç‰Œã‚’è¨±å¯ã—ãªã„
å’Œäº†å½¢ã®åˆ—æŒ™ã®éš›ã«åŒã˜ç‰Œã‚’5æšæŒã¤ã‚‚ã®ã‚’åˆ—æŒ™ã—ãªã„é™ã‚Šã€ä½•ã‚‚å·¥å¤«ã›ãšã¨ã‚‚è‡ªå‹•ã§5æšç›®ã®ç‰Œã‚’å¾…ã¤è´ç‰Œã‚’è¨±å¯ã—ãªããªã‚‹ã€‚

#### çŸ­æ‰€1. äº‹å‰è¨ˆç®—ã«ã‹ã‹ã‚‹æ™‚é–“ãŒé•·ã„
è‡ªåˆ†ã®ã‚³ãƒ¼ãƒ‰ã‚‚è‰¯ããªã„ã®ã‹ã‚‚ã—ã‚Œãªã„ãŒã€4æ™‚é–“åŠã¯é•·ã‹ã£ãŸã€‚


## å‚è€ƒ
https://mahjong.ara.black/etc/shanten/index.htm
https://blog.kobalab.net/entry/20150329/1427637532
https://blog.kobalab.net/entry/20151216/1450191666
https://blog.kobalab.net/entry/20151217/1450357254
https://qiita.com/tomohxx/items/75b5f771285e1334c0a5
https://qiita.com/KamichanR/items/de08c48f92834c0d1f74
ã¤ã‚‹ãã‚‚ã«ã‚ˆã‚‹ã‚ã‚‰æ°ã®æ‰‹æ³•ã§ã®å®Ÿè£…ä¾‹
https://github.com/zurukumo/mahjong/blob/7518640304d123aac179bba7a22ba937e3c4b427/core/shanten.py
https://github.com/zurukumo/mahjong/blob/7518640304d123aac179bba7a22ba937e3c4b427/core/make_shanten_table.py
ã¤ã‚‹ãã‚‚ã«ã‚ˆã‚‹tomohxxæ°ã®æ‰‹æ³•ã§ã®å®Ÿè£…ä¾‹
https://github.com/zurukumo/kago-utils/blob/93f9220749bf76e1da0339952c6d9cb7a24bc758/kago_utils/shanten.py
https://github.com/zurukumo/kago-utils/blob/93f9220749bf76e1da0339952c6d9cb7a24bc758/kago_utils/generate_shanten_table.py
